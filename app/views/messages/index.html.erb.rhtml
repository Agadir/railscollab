<%
  @page_actions = []
  if ProjectMessage.can_be_created_by(@logged_user, @active_project)
    @page_actions += [
    	{:title => :add_message, :url => (@current_category.nil? ? 
    										new_message_path : new_message_path(:category_id => @current_category.id))},
    	{:title => :add_category, :url => new_category_path },
    ]
  end
%>

<% if not @messages.empty? %>
<div id="messages">
  <div id="messagesPaginationTop">
  <%= pagination_links "/project/#{@active_project.id}/messages?", @pagination unless @pagination.length <= 1 %>
  </div>
<%= render :partial => 'messages/show', :collection => @messages, :locals => {:on_message_page => false} %>
  <div id="messagesPaginationBottom">
  <%= pagination_links "/project/#{@active_project.id}/messages?", @pagination unless @pagination.length <= 1 %></div>
</div>
<% else %>
<p>
<% if @current_category.nil? %>
<%= :no_messages_in_project.l %>
<% else %>
<%= :no_messages_in_category.l %>
<% end %>
</p>
<% end %>
